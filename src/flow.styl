@import 'nib'
// @require 'variables'
tomorrow-current-line = #efefef
tomorrow-selection = #d6d6d6
tomorrow-foreground = #4d4d4c
tomorrow-comment = #8e908c
tomorrow-red = #c82829
tomorrow-orange = #f5871f
tomorrow-yellow = #eab700
tomorrow-green = #718c00
tomorrow-aqua = #3e999f
tomorrow-blue = #4271ae
tomorrow-purple = #8959a8
flow-color-yellow = #FAF185
flow-color-yellow-dk = #F6E76A
flow-color-yellow-lt = #FBF3B5
flow-color-orange = #F5A623
flow-color-link = #428bca

monospace()
  font-family 'Source Code Pro', Menlo, Monaco, Consolas, "Courier New", monospace

smallcaps()
  font-weight 300
  text-transform uppercase
  font-size 10px
  letter-spacing 1px

block()
  position absolute
  display block

text-block(height, right=0, left=0)
  block()
  left left
  right right
  height height
  line-height height

size(width, height=width)
  width width
  height height

// These mixins turn elements into absolutely position block elements.
// The arguments are always in CSS order: top, right, bottom, left
//    unless they have widths or heights defined, in which case those
//    arguments go first.
dock(top=0, right=0, bottom=0, left=0)
  block()
  top top
  right right
  bottom bottom
  left left

dock-top(height, top=0, right=0, left=0)
  block()
  top top
  right right
  left left
  height height

dock-bottom(height, right=0, bottom=0, left=0)
  block()
  right right
  bottom bottom
  left left
  height height

dock-left(width, top=0, bottom=0, left=0)
  block()
  top top
  bottom bottom
  left left
  width width

dock-right(width, top=0, right=0, bottom=0)
  block()
  top top
  right right
  bottom bottom
  width width

dock-top-left(width, height, top=0, left=0)
  block()
  top top
  left left
  size(width, height)

dock-bottom-left(width, height, bottom=0, left=0)
  block()
  bottom bottom
  left left
  size(width, height)

dock-top-right(width, height, top=0, right=0)
  block()
  top top
  right right
  size(width, height)

dock-bottom-right(width, height, right=0, bottom=0)
  block()
  right right
  bottom bottom
  size(width, height)

flow-box-padding-left = 50px
flow-box-padding-right = 0px
flow-header-height = 125px
flow-footer-height = 30px
flow-sidebar-width = 300px
flow-sidebar-header-height = 31px

//TODO table.table is used in frame output
//TODO alert is used in flow-failure

// 
// Bootstrap overrides
// 

body
  font-family Roboto, 'Source Sans Pro', Lato, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif
  color #777

h1, h2, h3, h4
  font-weight 300

code, kbd, pre, samp
  monospace()

kbd
  color #333
  -webkit-box-shadow none
  box-shadow none
  background-color #fff
  border 1px solid #ccc
  padding 1px 4px

blockquote
  font-weight 300

pre
  border none
  border-radius 0
  background #fafafa

textarea
  &:focus
    outline none

input
  &:focus
    outline none

label
  font-weight normal
  input[type="radio"]
    margin-right 6px
  input[type="checkbox"]
    margin-right 6px

.container-fluid
  padding-left 0
  padding-right 0
.flow-box-notebook
  .container-fluid
    padding 10px 20px 10px flow-box-padding-left

.navbar-default
  background none
  border none
  margin-bottom 0
  .navbar-nav
    > .active
      > a, > a:hover, > a:focus
        background-color flow-color-yellow
    > .open
      > a, > a:hover, > a:focus
        background-color flow-color-yellow

.flow-box
  dock()
  .flow-box-header
    dock-top(flow-header-height, 0, flow-box-padding-right, flow-box-padding-left)
    overflow visible
    box-sizing border-box
    border-bottom 1px solid #ddd
  .flow-box-body
    dock(flow-header-height, 0, flow-footer-height, 0)
  .flow-box-notebook
    dock(0, flow-sidebar-width, 0, 0)
    overflow auto
  .flow-box-sidebar
    dock-right(flow-sidebar-width)
    box-sizing border-box
    border-left 1px solid #ddd
  .flow-box-footer
    dock-bottom(flow-footer-height, flow-box-padding-right, 0, flow-box-padding-left)
    overflow hidden
    line-height flow-footer-height
    box-sizing border-box
    border-top 1px solid #ddd
  .flow-box-body
    &.flow-hide-sidebar
      .flow-box-sidebar
        display none
      .flow-box-notebook
        right 0

.navbar-brand
  background url(unquote('data:image/png;base64,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')) 15px center no-repeat

  width 160px
  margin-left -15px

.table
  thead
    tr
      th
        border-bottom 1px solid #ccc

th
  smallcaps()

.alert
  border-radius 0

//
//
//

.flow-navbar
  border-top 5px solid flow-color-yellow

.flow-header
  border-top 5px solid flow-color-yellow
  padding 20px 0  
  .flow-logo
    margin-left 5px

.flow-cell
  position relative
  padding-left 5px
  border-left 3px solid transparent
  .flow-cell-type
    display none
    position absolute
    width 25px
    left -28px
    top 0
    text-transform uppercase
    font-size 10px
    background flow-color-yellow
    padding 1px 3px
    text-align center
  .flow-cell-code
    textarea
      color #333
      width 100%
      max-height 500px
      border none
      border-left 2px solid tomorrow-orange
      monospace()
      background url(unquote('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAKElEQVQImWN89+4dAwODoKAgAwMDE5z1/v17xv///0NYUBkIS1BQEAB7Uw7Oc/qzUwAAAABJRU5ErkJggg=='))
      padding 5px 10px
    .flow-cell-actions
      width 20px
      text-align right
      vertical-align top
      .fa-paperclip:hover
        color flow-color-link
    &.flow-cell-has-output
      textarea
        border-left 2px solid tomorrow-blue
  &.flow-cell-selected
    border-color flow-color-yellow
    .flow-cell-type
      display block
  &.flow-cell-active
    border-color flow-color-orange
    .flow-cell-type
      background flow-color-orange
      color #fff
    .flow-cell-code
      textarea
        background: url(unquote('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAJklEQVQImT2JwREAIAiAaGPbOW0MenjJiwPqhJ+lAsDNTbf+jKkPzF8mz4scIeAAAAAASUVORK5CYII='))
  &.flow-cell-busy
    border-color tomorrow-aqua
    .flow-cell-type
      background tomorrow-aqua
      color #fff
  &.flow-cell-error
    border-color red
    .flow-cell-type
      background red
      color #fff

.flow-hide-inputs
  .flow-cell-input
    display none

.flow-hide-outputs
  .flow-cell-code
    .flow-cell-output
      display none

.flow-cell-code
  .flow-hide-output
    display none
  
// 
// Styles that apply only to html cells 
// 

.flow-html-output
  h1, h2, h3, blockquote
    font-weight 300

.flow-raw-output
  pre
    background inherit

.flow-object
  margin-left 20px
  strong
    font-weight normal
    color tomorrow-orange

.flow-hide
  display none

.flow-unhide
  tr.flow-hide
    display table-row

.flow-invisible
  visibility hidden

.flow-widget
  padding 0 10px
  margin-bottom 40px

  h4
    text-transform uppercase
    font-size 75%
    letter-spacing 3px
    border-bottom 1px dotted #ccc
    margin-top 20px

.flow-well
  margin 10px 0
  padding 10px
  border 1px dotted #ccc

.flow-panel
  margin-top 20px
  padding 10px 0

.flow-margin-after
  margin-bottom 10px

.flow-monospace
  monospace()

.flow-pointer
  cursor pointer

table
  &.flow-form
    width 100%
    th, td
      padding 2px 5px
      vertical-align top
    th
      line-height 20px
      &:first-child
        text-align right
    tr.flow-actions
      th, td
        padding-top 5px
        border-top 1px dotted #ccc
  &.flow-form-ruled
    th, td
      border-bottom 1px solid #eee
    tr:first-child
      border-top 1px solid #eee
      

.flow-narrow
  white-space nowrap

.flow-wide
  width 99%

// TODO BUG if the .fa is the only child, both these
//  styles get applied. Need to wrap all captions
//  in a span for this to work correctly.
.flow-hint
  > .fa:last-child
    margin-left 5px
  > .fa:first-child
    margin-right 5px

.flow-frame-output
  .flow-bg-gray
    background-color #f5f5f5

.flow-small
  font-size 85%

.flow-small-caps
  smallcaps()

.flow-left
  text-align left

.flow-right, .rt
  text-align right

.flow-center
  text-align center

.flow-hud
  display inline-block
  margin-right 15px
  .fa
    margin-right 5px

.flow-button
  cursor pointer
  border-radius 12px
  border 1px solid #ccc
  padding 2px 12px
  font-size: 85%
  background-color: #fff
  white-space nowrap
  &:hover
    background-color #eee
    border-color #aaa
  &.flow-button-toggle
    color #fff
    background-color #777
    border-color #777
    &:hover
      background-color #333
      border-color #333
  > .fa:first-child
    margin-right 5px
  > .fa:last-child
    margin-left 5px
  &:disabled
    color #bbb
    &:hover
      background-color #fff
      border-color #ccc

//TODO replace with .flow-form input[type=text]
.flow-textbox
  width 100%
  border none
  border-bottom 1px solid #ccc
  &:focus
    border-bottom-color #000

.flow-textarea
  width 100%
  border 1px solid #ccc

.flow-toolbar-button
  padding 2px 7px
  border-radius 2px

.flow-titlebar
  height 32px
  span
    font-size 120%
    font-weight 300
  input
    width 90%
  .fa
    margin-left 5px
  .fa-pencil
    display none
  &:hover
    span
      color flow-color-link
    .fa-pencil
      display inline
  


//TODO move to failure.styl
.flow-failure
  border-top 1px dotted #ccc
  padding 15px
  margin 10px 0 20px 0
  color red

.flow-nowrap
  th, td
    white-space nowrap

.flow-plot
  overflow auto
  margin-bottom 20px
  table
    margin 10px 0 20px 0
    font-size 85%
    tr:nth-child(odd)
      background-color #eee
    td, th
      padding 2px 5px


  // Nasty hacks - FIXME
  .vx-tooltip
    table
      font-family monospace !important
      margin 0 !important
      font-size 100% !important
      tr:nth-child(odd)
        background-color inherit !important
      td, th
        padding 0px 4px !important

  table.flow-matrix
    margin 0
    tr
      background-color inherit !important
    td
      border-left 1px solid #aaa
      border-top 1px solid #aaa
      &:first-child
        border-left none
    tr:first-child
      td
        border-top none
  .plot
    .axis
      font-size 10px
      path, line
        fill none
        stroke #999
        shape-rendering crispEdges
    .bar
      fill gray

  .flow-legend
    font-size 85%
  .flow-legend-item
    margin-right 15px
  .flow-legend-swatch
    display inline-block
    width 10px
    height 10px
    margin-right 3px

.flow-sidebar
  dock()
  .flow-sidebar-header
    dock-top(flow-sidebar-header-height + 2px)
    overflow hidden
    padding 10px 10px 0 10px
    .flow-tabs
      border-bottom 1px solid flow-color-yellow-dk
    .flow-tab
      display inline-block
      height flow-sidebar-header-height - 10px
      line-height flow-sidebar-header-height - 10px
      width 25%
      text-align center
      smallcaps()
      &:hover
        background #f1f2f3
      &.active
        color black
        background flow-color-yellow
  .flow-sidebar-body
    dock(flow-sidebar-header-height + 2px)
    > div
      padding 10px

    .flow-sidebar-content
      > div
        padding 10px
      overflow auto
      dock(45px)

.flow-browser
  p
    padding 10px
    border 1px dashed #ddd
  table
    width 100%
  tr:hover
    background #f1f2f3
  td
    border-bottom 1px solid #ddd
    padding 1px 3px
    vertical-align top
  .fa-trash-o:hover
    color red

.flow-clipboard, .flow-outline
  p
    padding 10px
    border 1px dashed #ddd
  table
    width 100%
  tr:hover
    background #f1f2f3
  td
    border-bottom 1px solid #ddd
    padding 1px 3px
    vertical-align top
    span
      background flow-color-yellow
      text-transform uppercase
      font-size 10px
      padding 1px 3px
      &.active
        background flow-color-orange
        color #fff
  pre
    font-size 85%
    background none
    padding 0
    margin 0
    max-width 200px
    overflow ellipsis
    &:hover
      color flow-color-link
  .fa-play-circle:hover
    color flow-color-link
  .fa-trash-o:hover
    color red

.flow-help
  mark
    display inline-block
    font-size 10px
    text-transform uppercase
    padding 0 6px
    background flow-color-yellow
  ul
    padding 0 0 0 20px
  h5
    font-weight 300
    font-size 18px
    color #999
  h6
    font-size 10px
    text-transform uppercase
    border-bottom 1px dotted #aaa
    margin-top 25px

  small
    color #999

.flow-help-toolbar
  position absolute
  top 17px
  right 10px

  .flow-help-toolbar-button
    display inline-block
    margin-left 10px
    color #ccc

  a.flow-help-toolbar-button
    cursor pointer
    color #999
    &:hover
      color #777

.flow-outline
  pre
    max-width 240px

.flow-status-bar
  padding-right 10px
  font-size 80%
  table
    width 100%
  td
    padding 0 5px
  .fa-cog
    display none
  &.busy
    background flow-color-yellow
    .fa-cog
      display inline
    .fa-circle
      display none


.twitter-typeahead
  width 97%

.tt-dropdown-menu
  background #fff
  border 1px solid #ccc
  width 100%
  box-shadow 0 5px 10px rgba(0,0,0,.2)

.tt-suggestion
  padding 3px 10px
  line-height 24px
  overflow ellipsis
  &.tt-cursor
    background-color flow-color-yellow
  p
    margin 0
